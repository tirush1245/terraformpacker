{
    "_comment" : "Create a AWS AMI ith AMZ Linux 2018 with Java and Tomcat",
    "variables": {
      "aws_access_key": "",
      "aws_secret_key": ""
      
    },
    "builders": [{
        "access_key": "{{user `aws_access_key`}}",
        "secret_key": "{{user `aws_secret_key`}}",
        "type": "amazon-ebs",
        "region": "ap-south-1",
        "source_ami": "ami-0e6329e222e662a52",
        "instance_type": "t2.micro",
        "ssh_username": "ec2-user",
        "ami_name": "Terraform-AMI-{{isotime | clean_resource_name}}",
        "vpc_id": "vpc-0ff9b9694ca2b2a81",
        "subnet_id": "subnet-04c093bc3b7400014",
        "tags": {
          "Name": "Terraform-AMI-{{isotime | clean_resource_name}}"
        }
      }],
      "provisioners": [{
        "type": "shell",
        "inline": [
          "sleep 30",
          "sudo yum update -y",
          "sudo amazon-linux-extras install nginx1 -y",
          "sudo yum install git -y",
          "sudo git clone https://github.com/tirush1245/webhooktesting.git",
          "sudo rm -rf /usr/share//nginx/html/index.html",
          "sudo cp webhooktesting/index.html /usr/share/nginx/html/index.html",
          "sudo cp webhooktesting/style.css /usr/share/nginx/html/style.css",
          "sudo cp webhooktesting/scorekeeper.js /usr/share/nginx/html/scorekeeper.js",
          "sudo service nginx start",
          "sudo chkconfig nginx on "
          ]
      }
    ]
}   